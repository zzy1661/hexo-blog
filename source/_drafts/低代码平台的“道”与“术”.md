道德经有云: "有道无术，术可求；有术无道，止于术。"
这篇文章并不是讲什么"道术法器"的方法论，（我是一个及其厌恶互联网黑话的人），仅仅记录一下在低代码开发中的一些心路历程。


## 低代码平台的道

低代码平台的最核心的“道”，就是几个基本问题的答案：
平台的客户和用户是谁? 平台给客户解决什么问题？平台的边界是什么？

比如我司的低代码，最初就是给产线解决租户定制问题，用户是开发，面向的场景就是公司内项目和产品所遇到的业务需求。

因此，低代码平台以元数据驱动，大量支持表达式、js等动态逻辑，并且在工作流、租户隔离/定制、数据运维、数据权限、查询性能方面做了很多工作。这些就是我们平台的“术”。


相比市面上优秀的低代码产品，没有审批流，没有丰富的模板应用，视图标准也相对固定。但并不能因为这些平台的“术”更繁多精妙，就认为它们更优秀。

比如说我们平台没有审批流，我司的业务，并不是给客户提供审批流，而且我司面向的客户，一般都有自己的高定oa系统。
应用市场没有丰富的模板，比如考勤、crm、erp等，那是因为我司产品与业务，和这些行业没有任何关联。

再比如，有人觉得元数据模型、关系、js、样式、表达式、变量这些概念理解困难，但是我们面向的用户，都是开发人员，且一般团队都有前后分工，理解这些没有任何困难。

再换个角度，以市面上的产品来解决我司面临的问题：
流程引擎驱动型产品，应对不了我司复杂的业务需求；视图驱动型产品，配置效率极低，也满足不了交付团队的成本诉求。


## 坚守平台的边界，殊为不易

低代码平台的“道”，并不是一成不变的，而是随平台发展与业务沉淀不断发展。
比如当平台已经基本满足内部诉求，开始向外发展时，就需要调整平台的“道”。

如何调整？一种常见的策略就是集百家之长：调研各种平台，把人家做的好的，全都搬过来。




即平台设定的各种准则规范或者默认逻辑，比如：
平台面向复杂场景，所有配置项支持动态逻辑；
低代码平台分为运行时和配置时，分别由不同角色的用户使用
仅可能多的支持用户习惯，用户习惯高于平台配置（如用户可自行调整表格列顺序宽度）；
纯空格值无意义，对用户的表单输入自动做trim；
对用户的表单输入自动做trim；
字段控件取决于字段类型；
两个对象之间的关系是静态的（不能在某些情况下A对象一对多B对象，某些情况下A对象一对一B对象）等等。

当设定这些道时，就已经做出了取舍：
比如用户表单输入自动做trim，那么用户就无法保存空格，也无法以空格作为条件进行查询。

基于这条准则，我们有很多方法可以实现，这些方法就是术；
然而有一天张三来提需求：一定要输入空格。

如果是我，我一定会断然拒绝这个需求。因为这并不是一个简单的需求，而是要颠覆一个准则，接受这个需求，意味着要重新树立一个准则：用户可以输入空格。
那么会接连带来更多的需求：空格如何展示；空字符串、一个空格、多个个空格、null是否相等如何区分；如何查询空格...
这些需求并不是张三提的，而是“用户可以输入空格”这个准则要求的。

最后迫于各种压力这个需求还是做了，用户可以配置是否trim。因为该用户不关心这些连带的问题，所以改动也不大。
然而，如果又来了一个用户，关心这些连带的问题，该如何处理呢？李四认为一个空格和多个空格都是无值，王二认为这两个都是有值，且是不同的值，赵五可能还有别的理解，就只能无止尽的打补丁，这就是止于术。


同样还有一个例子，平台认为用户习惯高于平台配置。比如说A用户关心金额和数量，B用户关心出库和入库时间，他们分别将这两列设置为第一列和第二列。
此时配置人员又增加了一个字段，异常信息。平台将这个字段设置为第一列，这时候就与用户习惯产生了冲突。

平台的准则是用户习惯高于配置，在不干扰用户习惯的前提下，新增的字段放到某个合适的位置。

然而配置的人或者部分用户认为，用户最应该关心有无异常，如果配置的顺序有变更，应该让用户第一时间注意到。


对他们来说，仅仅是一个运行时同步字段顺序的问题，然而实际上，他们是对“用户习惯高于配置”的准则的挑战。

他们这个需求背后的准则是：当平台配置发生变动时，配置高于用户习惯。

这两个准则各有优劣，但无法共存。

所以用户因自己配置的顺序被改变而投诉，或者项目上配置的顺序因用户习惯覆盖无法生效而投诉，总得选一个。

哪怕是平台用一些设计（术），支持配置用户优先或者配置优先，也免不了投诉，因为不同用户之间的诉求都不一样，到最后反而骑墙难下。这就是"终于术"。



平台面向复杂场景，所有配置项支持动态逻辑。
这意味着平台更适合卖给复杂场景的大B，因此除了提供丰富的配置和动态能力，团队还需要具备强大的解决方案设计能力；

在术的层面，可以抄那些类似的竞品功能，但是如果不能理解他们功能设计的“道”，到最后只会抄成一个四不像。

但如果平台想要对无开发能力的小B，就必须要阉割掉各种动态逻辑配置，大幅缩减配置项团队应该具备广阔的视野以提供更多行业模板；

这是两种完全不同的路线，想要通过一些技术改造，让平台适应这两种场景，最终一定是竹篮打水一场空。

懒惰的程序员

同一项功能对不同定位的平台，会有不同的工作量。

对小B，没有性能和安全强需求，但对大B不一样。
如果没有强调平台的定位，程序员总能找到某个场景，证明他的设计的合理性，以逃避更多的工作量

比如文件上传，由前端直接上传和由后端上传，工作量上前者更低：前者需要用户自行申请oss并提供key，后者由平台提供oss，并提供审计、管理功能，显然小B更愿意后者，对他们来说简单；
但大B更注重安全性，自己提供oss，自行管理。如果是出于工作流考虑，后者也更少。
光看技术方案，两者都合理，如果你是一个领导者，看不清“术”，比如回过头来想想,平台的定位是啥。