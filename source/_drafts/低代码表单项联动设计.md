低代码表单项之间的联动是视图开发的一个难点：联动场景多，设计难，运行逻辑也复杂。我大致将联动场景分为：枚举分组、计算依赖、属性性依赖、关系依赖，下文将详细介绍每一种场景。
## 枚举分组
枚举分组严格来并不是多控件之间的交互，但也是一种非常常见的交互形式。

比如成员组别是一个枚举，有销售一组，市场一组，财务组等等，共计20个以上，如果单纯做下拉框，选择比较困难。不同的组有分属不同的大区，比如华南大区销售一组，华北大区市场一组，总部财务组，如果能够按照大区进行分组，先选择大区再选择组，用户体验会好很多。

这个场景，如果将它理解为一个虚拟组织，以组织树的形式进行展示，也能实现。但是组织对象一般是一个唯一的系统对象，虚拟组织并不是一个普遍需求，如果平台为个别项目设计虚拟组织功能，收益可能无法覆盖开发成本。

这里有更简单的做法：这个场景可以将组别理解为枚举，大区理解为枚举分组。不管是组别还是大区都是相对固定，低频变更的数据，用枚举比对象+关系更合适。分组操作可设计为拖拉拽，不管是配置人员还是使用人员，都可以轻易完成。

## 计算依赖
 依赖计算是指，当一个字段发生变更时，另一个字段要联动变更。
 
 比如单价 * 数量 = 总价，单价/数量修改后，总价要相应显示修改后的值。

这种场景，我会对总价字段，设置一个依赖计算的配置项，配置依赖的字段和计算公式。

运行时的实现，需要注意链式更新和循环更新。即A字段修改触发B字段更新，B字段更新可能会触发其他依赖字段的更新。这就是链式更新。

当链式更新从A触发，并且A又被其他字段的变更触发了更新，就会出现循环更新。一般情况下需要避免循环更新。


## 属性依赖

字段的可见性、可修改型、必填性，可能依赖于其他字段。
比如只有先选择商品类型后，才能添加。

这种属性依赖的场景会比较多，且逻辑是无法穷举的，可以提供表达式编辑器或js编辑器供使用者自定义依赖逻辑。

这里有一个特殊场景：字段的类型/控件依赖于其他字段。

比如当商品类型为单品时，物料下拉框只能选择一个；当商品类型为捆绑包时，物料可以选择多个。这种对控件属性的动态逻辑，尚可通过属性依赖实现，但如果这两种情况下，物料的选择控件都不一样，则不建议通过属性依赖实现。

最佳实践是使用两个字段表示物料，通过可见性依赖，对不同的商品类型展示不同的物料字段。


## 关系依赖
关系依赖可能是最常见的一种级联。
比如卖场和商品之间存在一对多关系，当表单中的卖场被修改后，商品字段的下拉也应联动更新。

这种级联效果，可以基于元数据对象之间的关联关系来实现。

## 其他情况
项目中还有遇到其他不属于上述场景的联动需求，比如某字段变更后清空表单其他字段/刷新某个下拉列表等。这种无法抽象和归类的需求，统统用工作流兜底。由工作流提供表单更新、校验、刷新，以及其他js自定义逻辑。